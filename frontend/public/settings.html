<!DOCTYPE html>
<html>

  <head>
    <meta charset="UTF-8">
    <title>Interjector - Settings</title>
  </head>

  <body>
    <h1>Settings</h1>
    <h2>Translation</h2>
    <p>
      <label for="translation-source-language">Source language: </label>
      <input type="text" id="translation-source-language" placeholder="Translate from">
    </p>
    <p>
      <label for="translation-target-anguage">Target language: </label>
      <input type="text" id="translation-target-anguage" placeholder="Translate to">
    </p>
    <p>
      <label for="translation-backend">Backend: </label>
      <input type="text" id="translation-backend" placeholder="Backend">
    </p>
    <p>
      <label for="translation-api-url">API URL: </label>
      <input type="text" id="translation-api-url" placeholder="API URL">
    </p>
    <p>
      <label for="translation-api-key">API Key: </label>
      <input type="password" id="translation-api-key" placeholder="API Key">
    </p>
    <p>
      <label for="translation-model">Model: </label>
      <input type="text" id="translation-model" placeholder="Model">
    </p>
    <p>
      <label for="translation-prompt">Prompt: </label>
      <textarea id="translation-prompt" placeholder="Prompt"></textarea>
    </p>
    <h2>Completion</h2>
    <p>
      <label for="completion-api-url">API URL: </label>
      <input type="text" id="completion-api-url" placeholder="API URL">
    </p>
    <p>
      <label for="completion-api-key">API Key: </label>
      <input type="password" id="completion-api-key" placeholder="API Key">
    </p>
    <p>
      <label for="completion-model">Model: </label>
      <input type="text" id="completion-model" placeholder="Model">
    </p>
    <p>
      <label for="completion-prompt">Prompt: </label>
      <textarea id="completion-prompt" placeholder="Prompt"></textarea>
    </p>
    <hr>
    <button id="save-settings">Save</button>
    <script>
      if (window.localStorage.getItem('globalOptions')) {
        const globalOptions = JSON.parse(window.localStorage.getItem('globalOptions'));
        document.querySelector('#translation-source-language').value = globalOptions.translation.sourceLanguage;
        document.querySelector('#translation-target-anguage').value = globalOptions.translation.targetLanguage;
        document.querySelector('#translation-backend').value = globalOptions.translation.backend;
        document.querySelector('#translation-api-url').value = globalOptions.translation.apiUrl;
        document.querySelector('#translation-api-key').value = globalOptions.translation.apiKey;
        document.querySelector('#translation-model').value = globalOptions.translation.model;
        document.querySelector('#translation-prompt').value = globalOptions.translation.prompt;
        document.querySelector('#completion-api-url').value = globalOptions.completion.apiURL;
        document.querySelector('#completion-api-key').value = globalOptions.completion.apiKey;
        document.querySelector('#completion-model').value = globalOptions.completion.model;
        document.querySelector('#completion-prompt').value = globalOptions.completion.prompt;
      }
      document.querySelector('#save-settings').addEventListener('click', () => {
        const translation = {
          targetLanguage: document.querySelector('#translation-target-anguage').value,
          sourceLanguage: document.querySelector('#translation-source-language').value,
          backend: document.querySelector('#translation-backend').value,
          apiUrl: document.querySelector('#translation-api-url').value,
          apiKey: document.querySelector('#translation-api-key').value,
          model: document.querySelector('#translation-model').value,
          prompt: document.querySelector('#translation-prompt').value
        };
        const completion = {
          apiURL: document.querySelector('#completion-api-url').value,
          apiKey: document.querySelector('#completion-api-key').value,
          model: document.querySelector('#completion-model').value,
          prompt: document.querySelector('#completion-prompt').value
        };
        const globalOptions = {
          translation,
          completion
        };
        window.localStorage.setItem('globalOptions', JSON.stringify(globalOptions));
      });
    </script>
  </body>

</html>